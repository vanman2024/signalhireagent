# signalhireagent Development Guidelines

Auto-generated from all feature plans. Last updated: 2025-09-11

## Active Technologies
- Python 3.11 + asyncio (signalhireagent)
- Stagehand (AI browser automation with Playwright)
- FastAPI (callback server for webhooks/status)
- httpx (async HTTP client for API monitoring only)  
- pandas (CSV data processing and export)
- pydantic (data validation and models)
## Project Structure
```
src/
‚îú‚îÄ‚îÄ models/              # Data models (Prospect, SearchCriteria, etc.)
‚îú‚îÄ‚îÄ services/            # Business logic (search, reveal, export services)
‚îú‚îÄ‚îÄ cli/                 # Command-line interface
‚îî‚îÄ‚îÄ lib/                 # Libraries (browser_client, csv_exporter, rate_limiter)
tests/
‚îú‚îÄ‚îÄ contract/            # Browser automation contract tests
‚îú‚îÄ‚îÄ integration/         # End-to-end workflow tests
‚îî‚îÄ‚îÄ unit/               # Unit tests for individual components
```

## Commands
```bash
# Search and reveal prospects via web interface
signalhire search --title "Software Engineer" --location "San Francisco" --company "Tech Corp" --limit 50

# Bulk reveal using SignalHire's native web export (1000+ contacts)
signalhire bulk-reveal --search-id <id> --export-format csv --output results.csv

# Monitor credits via API
signalhire credits --check

# List and manage saved searches from web interface
signalhire list-searches
signalhire export-search --search-id <id> --format csv
```

## Code Style
Python: Follow PEP 8, use async/await patterns, structured logging with JSON
TypeScript: ESLint + Prettier for Stagehand automation scripts

## Testing Commands
- Run tests: `python3 run.py -m pytest`
- Tests with coverage: `python3 run.py -m pytest --cov=src --cov-report=term-missing`
- Test selection: `python3 run.py -m pytest -m unit`, `python3 run.py -m pytest -m "integration and not slow"`

## Task Assignment & Coordination

### My Responsibilities (@claude - Worker Claude)
**Check `specs/001-looking-to-build/tasks.md` for @claude assignments:**
- Architecture and integration tasks (FastAPI server, logging, config)
- Multi-file changes and complex refactoring
- Cross-service integration and browser automation
- System design and complex debugging

### Task Workflow & Completion Requirements
1. **Check for assignments**: Look for `@claude` in tasks.md
2. **Plan the implementation**: Consider multi-file impacts and integration points
3. **Implement with tests**: Create comprehensive implementation with proper testing
4. **COMMIT YOUR WORK**: All agents MUST commit their code changes when tasks are complete
5. **Mark completion**: Change `[ ]` to `[x]` in tasks.md immediately after finishing - this is your commitment symbol
6. **Document patterns**: Update shared context if new patterns are established

### Critical Completion Protocol
- ‚úÖ **ALWAYS commit code changes** when completing tasks
- ‚úÖ **ALWAYS mark tasks as complete** with `[x]` symbol in tasks.md
- ‚úÖ **Use completion symbols** to show you have committed your work
- ‚ùå **NEVER leave uncommitted work** when marking tasks complete

### Commit Message Requirements for ALL AGENTS
**MANDATORY**: Every agent must include their identity and task reference in commits:

```bash
# Template for all agents:
git commit -m "$(cat <<'EOF'
[AGENT_ACTION]: Brief description of changes

- Specific change 1
- Specific change 2
- Reference to task numbers completed (e.g., T025, T030)

[AGENT_NAME] completed: T### Task description
Supports: [Project specification reference]

ü§ñ Generated by [AGENT_NAME] with Claude Code

Co-Authored-By: [AGENT_NAME] <noreply@anthropic.com>
EOF
)"
```

**Examples by Agent:**
```bash
# @claude commits:
ü§ñ Generated by Claude with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
Claude completed: T025 Add configuration management for API vs browser preferences

# @copilot commits:
ü§ñ Generated by Copilot with Claude Code
Co-Authored-By: Copilot <noreply@anthropic.com>
Copilot completed: T010 CLI improvements for user experience

# @gemini commits:
ü§ñ Generated by Gemini with Claude Code
Co-Authored-By: Gemini <noreply@anthropic.com>
Gemini completed: T029 Update CLI command documentation

# @codex commits:
ü§ñ Generated by Codex with Claude Code
Co-Authored-By: Codex <noreply@anthropic.com>
Codex completed: T004 Enhanced API client contract test
```

### Current @claude Tasks
```bash
# Check my current assignments:
grep "@claude" specs/001-looking-to-build/tasks.md
```

### Key Focus Areas
- **Integration**: FastAPI callback servers, Stagehand browser automation
- **Architecture**: Cross-cutting concerns, logging, configuration management
- **Quality**: Code refactoring and removing duplication across components

### Example Task Pattern
```
- [ ] T031 @claude FastAPI callback server for Person API in src/lib/callback_server.py
```
**After completion:**
```  
- [x] T031 @claude FastAPI callback server for Person API in src/lib/callback_server.py
```

## Recent Changes
- 001-looking-to-build: Added SignalHire lead generation agent with web-based contact reveal + native CSV export

## Prerequisites
- SignalHire account with new UI enabled (click the UI toggle icon on right side of page)
- Valid SignalHire credentials in environment variables (SIGNALHIRE_EMAIL, SIGNALHIRE_PASSWORD)
- Chrome/Chromium browser for Stagehand automation
- New UI provides cleaner interface that's easier for AI agents to navigate

<!-- MANUAL ADDITIONS START -->

## WSL Environment Notes
- When reading screenshots or working with Windows paths, always use WSL-compatible paths (e.g., `/mnt/c/` instead of `C:\`)
- Screenshots saved by Windows applications should be accessed via WSL path format

## Documentation Guidelines
- ALWAYS check if documentation files already exist before creating new ones
- Use Read tool to verify file existence and content before creating documentation
- NEVER proactively create documentation files (*.md) or README files unless explicitly requested

- Always use absolute paths when reading files

## Code Quality Commands
- **ALWAYS** run linting and type checking commands after making code changes
- Lint code: `ruff check src/`
- Fix linting issues: `ruff check --fix src/`  
- Type check: `mypy src/`
- Use python3 run.py instead of direct pytest commands for consistent environment setup
- Test message for consistent behavior
- Always validate input parameters in all functions
- Never commit secrets or API keys - always use environment variables and .env files
- You're absolutely right - the environment variable issue is frustrating! The problem is that we're running Python from Windows but the .env file is in the WSL filesystem, so the environment variables aren't being loaded properly. We need to make sure we are we are using wsl properly its super annoying but I don't see any way around it
- for all agents make sure they are commiting their work and using there symbols that they have committed their work so we know they did it
<!-- MANUAL ADDITIONS END -->
# important-instruction-reminders
Do what has been asked; nothing more, nothing less.
NEVER create files unless they're absolutely necessary for achieving your goal.
ALWAYS prefer editing an existing file to creating a new one.
NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.
ALWAYS check if documentation files already exist before creating new documentation.
Use Read tool to verify file existence and content before creating documentation.
